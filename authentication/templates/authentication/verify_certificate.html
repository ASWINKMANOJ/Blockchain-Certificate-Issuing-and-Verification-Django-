{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Verify Certificate</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<div class="container py-5">

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">Verify Certificate</h2>
        <a href="{% url 'login' %}" class="btn btn-outline-primary btn-sm">Login</a>
    </div>

    <!-- Search Form -->
    <div class="card shadow-sm border-0 mb-4">
        <div class="card-body">
            <h4 class="mb-3">Enter Certificate ID</h4>

            <form method="POST">
                {% csrf_token %}
                <div class="input-group">
                    <input type="text" name="certificate_id" class="form-control" placeholder="Enter certificate ID" required>
                    <button class="btn btn-primary" type="submit">Verify</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ‚úÖ If certificate not found -->
    {% if not_found %}
        <div class="alert alert-danger">
            ‚ùå Certificate not found in system.
        </div>
    {% endif %}

    <!-- ‚úÖ If certificate found -->
    {% if found %}
        <div class="alert alert-success d-flex justify-content-between align-items-center">
            <span>‚úÖ Certificate Found in Database.</span>
            <a href="{% url 'print_certificate' certificate.certificate_id %}" 
               class="btn btn-success btn-sm" 
               target="_blank">
                <i class="bi bi-printer"></i> Download PDF
            </a>
        </div>

        <div class="card shadow-sm border-0">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h4 class="mb-0">Certificate Details</h4>
                    <a href="{% url 'print_certificate' certificate.certificate_id %}" 
                       class="btn btn-primary" 
                       target="_blank">
                        üìÑ Print Certificate
                    </a>
                </div>

                <table class="table table-bordered table-striped">
                    <tr>
                        <th>Certificate ID</th>
                        <td>{{ certificate.certificate_id }}</td>
                    </tr>
                    <tr>
                        <th>Recipient Name</th>
                        <td>{{ certificate.recipient_name }}</td>
                    </tr>
                    <tr>
                        <th>Course Name</th>
                        <td>{{ certificate.course_name }}</td>
                    </tr>
                    <tr>
                        <th>Issued Date</th>
                        <td>{{ certificate.issued_date }}</td>
                    </tr>
                    <tr>
                        <th>Issued By</th>
                        <td>{{ certificate.issued_by.email }}</td>
                    </tr>
                    <tr>
                        <th>Blockchain Hash</th>
                        <td style="word-break: break-all; font-size: 13px;">
                            {{ certificate.blockchain_hash }}
                        </td>
                    </tr>
                    <tr>
                        <th>Transaction Hash</th>
                        <td style="word-break: break-all; font-size: 13px;">
                            {{ certificate.transaction_hash }}
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    {% endif %}

</div>

</body>
</html>